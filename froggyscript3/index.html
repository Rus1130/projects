<style>
    #in {
        width: 500px;
        height: 500px;
        resize: none;
    }

    #in:focus {
        outline: none;
    }
</style> 
<head>

</head>
<body>
    <textarea id="in" spellcheck="false"></textarea>
</body>
<script src="./main.js"></script>
<script src="../Global/math.js"></script>
<script>
    const input = document.getElementById("in");
    // function return value
    //input.textContent = `func @funky {\n    out 'hello!'\n    return 10\n}\nout 'meow!'\ncall @funky\nout fReturn`;

    // method testing
    //input.textContent = `var hello = "world">type\nout hello>concat('hello!'>type)>length`;

    // variable in array
    //input.textContent = `var meow = 'woof'\nout meow\nvar array = [meow>type, 2, 3, 4, 5]\nout array>index(0)`;

    // out of bounds access
    //input.textContent = `var meow = 'woof'\nvar bee = [meow, 2, 3, 4, 5]\nout bee>index(7)`;
    
    // function with parameters
    //input.textContent = `pfunc @getGreeting ['name:S'] {\nreturn 'Hello, '>concat(name)>concat('!')\n}\npcall @getGreeting ['Alice']\nout fReturn`;
    
    // set
    //input.textContent = `var number = 0\nset number = 1>add(2)\nout number`;

    // inf loop
    //input.textContent = `var number = 0\nloop <<true>> {\n    set number = number>add(1)\nout number\n}\nout 'done!'`;

    // constant check 
    //input.textContent = `cvar myConstant = "hi!"\nset myConstant = "Try to change me."`;
    //input.textContent = `var hello = 'world'\nfree true\nout hello`;

    // function with parameters with methods
    //input.textContent = `pfunc @addTwo ["at_one:N", "at_two:N"] {\n    out at_one>add(at_two)\n}\npcall @addTwo [1>add(7>add(2)), 3>mul(2)]`;

    // if inside of function
    //input.textContent = `pfunc @funky ["funky_num:N"] {\n    if <<funky_num > 5>> {\n        out 'bigger than 5'\n    }\n    else {\n        out '5 or smaller'\n    }\n}\npcall @funky [10]`;

    // array methods
    //input.textContent = 'out [1, 2, 3, 4, 5]>join(" and ")>type'
    //input.textContent = `var hello = ['h', 'e', 'l', 'l', 'o']\nout hello>index(0)`;

    // fibonacci
    //input.textContent = `var a = 0\nvar b = 1\nvar temp = 0\n\nloop 20 {\n    out a\n    set b = a>add(b)\n    set a = temp\n    set temp = b\n}`

    // user input
    input.textContent = `var userInput = ""\nask "userInput" "string"\nout userInput`;

    // warn + err + longerr testing
    //input.textContent = `warn "This is a warning message"\nquietkill\nerror "This is an error message"\nlongwarn "long warning!" "This is a long warning message with details"\nlongerr "long error!" "This is a long error message with details"`;

    // kill testing
    //input.textContent = `var i = 0\nloop 50 {\n    set i = i>inc\n    if<<i > 25>>{\n        kill\n    }\n    out i\n}\nout 'This will not be printed'`;

    // user interrupt
    //input.textContent = `wait 10000\nout 'This will not be printed'`;

    input.addEventListener("keydown", (e) => {
        if(e.key === "Tab"){
            e.preventDefault();
            let start = input.selectionStart;
            let end = input.selectionEnd;

            input.value = input.value.substring(0, start) + "    " + input.value.substring(end);
            input.selectionStart = input.selectionEnd = start + 4;
        }
    });

    const fs3 = new FroggyScript3({
        warnout: (warn) => {
            console.warn(`${warn.type}\n\n${warn.message}\n    at line ${warn.line+1}\n    at column ${warn.col+1}`)
        },
        errout: (err) => {
            console.error(`${err.type}\n\n${err.message}\n    at line ${err.line+1}\n    at column ${err.col+1}`)
        },
        smallwarnout: (msg) => {
            console.warn(msg);
        },
        smallerrout: (msg) => {
            console.error(msg);
        }
    });

    window.addEventListener("keydown", e => {
        if (e.ctrlKey && e.key.toLowerCase() === "c") {
            fs3.interrupt();
        }
    });

    fs3.interpret(input.value);

</script>