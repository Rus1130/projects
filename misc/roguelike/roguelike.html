<style>
    html {
        font-family: Arial, Helvetica, sans-serif;
        user-select: none;
    }
    input {
        font-family: Arial, Helvetica, sans-serif;
        user-select: none;
    }
    input:focus{
        outline: none;
    }
</style>
<head>
    <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
</head>
<body>
    <span id="char-list"></span><br>
    <label for="character-input">Character Input:</label>
    <input type="text" id="character-input" onchange="setCharacter(this.value)"><br>
    <span id="gamegrid"></span>
</body>

<script>
    
const characters = [
    smile = [
        "ðŸ™‚"
    ],
    grin = [
        "ðŸ˜€"
    ],
    noface = [
        "ðŸ˜¶"
    ],
    poker = [
        "ðŸ˜"
    ],
    devil = [
        "ðŸ˜ˆ"
    ],
    tongue = [
        "ðŸ˜‹"
    ],
    nerd = [
        "ðŸ¤“"
    ],
    sunglasses = [
        "ðŸ˜Ž"
    ],
    hearts = [
        "ðŸ¥°"
    ],
    kiss = [
        "ðŸ˜˜"
    ]
]

const charNames = ["smile","grin","noface","poker","devil","tongue","nerd","sunglasses","hearts","kiss"]
let player = [
    sprite = '',
    x = '',
    y = ''
];

const charList = document.getElementById("char-list")
charList.innerHTML = charNames.join(", ")

let gameboard = [
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 0
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 1
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 2
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 3
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 4
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 5
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 6
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 7
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 8
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 9
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 10
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 11
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 12
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 13
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 14
    [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], // 15
]
const minX = 0;
const minY = 0;
const maxX = 15;
const maxY = 15;

function random(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1) + min);
}

player.y = random(0, gameboard.length - 1)
player.x = random(0, gameboard[player.y].length - 1)
gameboard[player.y][player.x] = `[${player.sprite}]`

const board = document.getElementById("gamegrid")
let gameState = "character-choose"

function updateBoard(){
    gameboard[player.y][player.x] = `[${player.sprite}]`
    let updatedGameboard = JSON.stringify(gameboard).replaceAll("\"[","[").replaceAll("]\"","]").replaceAll("]],[[","] [").replaceAll("[[[","[").replaceAll("]]]","]").replaceAll(",","")
    board.innerHTML = updatedGameboard
}

function setCharacter(character){
    let charIndex = charNames.indexOf(character)
    if(charIndex == -1) return alert(`'${character}' is not a chooseable character. `)
    player.sprite = characters[charIndex].join()
    Game()
    
}

function Game(){
    updateBoard()
    hotkeys('w,a,s,d', function (event, handler){
    switch (handler.key) {
        case "w":
            if(player.y > minY){
                gameboard[player.y][player.x] = []
                player.y -= 1
                updateBoard()
            } else {
                return console.log("You cannot move in this direction anymore!")
            }
            break;
        case "a":
            if(player.x > minX){
                gameboard[player.y][player.x] = []
                player.x -= 1
                updateBoard()
            } else {
                return console.log("You cannot move in this direction anymore!")
            }
            break;
        case "s":
            if(player.y < maxY){
                gameboard[player.y][player.x] = []
                player.y += 1
                updateBoard()
            } else {
                return console.log("You cannot move in this direction anymore!")
            }
            break;
        case "d":
            if(player.x < maxX){
                gameboard[player.y][player.x] = []
                player.x += 1
                updateBoard()
            } else {
                return console.log("You cannot move in this direction anymore!")
            }
            break;
        default:
            console.log("That is not a valid control!")
    }
});
}
</script>